/**
 * UI Consistency Layer
 * Ensures all components use design tokens consistently
 * Bridges Tailwind CSS with custom design system
 */

/* ========================================
   BUTTON CONSISTENCY
   Override/enhance Tailwind button classes
   ======================================== */

/* Exclude navigation and icon buttons from base styling */
.btn:not(nav .btn):not([size="icon"]),
.button:not(nav .button):not([size="icon"]),
[class*="btn-"]:not(nav [class*="btn-"]):not([size="icon"]) {
  /* Ensure minimum touch target */
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  
  /* Consistent transitions */
  transition: var(--transition-colors), var(--transition-transform);
  
  /* Focus states */
  &:focus-visible {
    outline: var(--outline-focus);
    outline-offset: var(--outline-offset-focus);
  }
  
  /* Prevent layout shift on hover */
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Primary button consistency - exclude navigation */
.btn-gold:not(nav .btn-gold),
.btn-primary:not(nav .btn-primary) {
  background-color: var(--color-accent);
  color: var(--color-accent-text);
  border-radius: var(--radius-md);
  font-weight: var(--font-semibold);
  padding: var(--space-3) var(--space-6);
}

.btn-gold:not(nav .btn-gold):hover,
.btn-primary:not(nav .btn-primary):hover {
  background-color: var(--color-accent-hover);
  transform: translateY(-1px);
}

.btn-gold:not(nav .btn-gold):active,
.btn-primary:not(nav .btn-primary):active {
  transform: translateY(0);
}

/* ========================================
   CARD CONSISTENCY
   Ensure all cards have consistent elevation
   ======================================== */
.card,
[class*="Card"] > div {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  transition: var(--transition-colors);
  border: 1px solid var(--color-border);
}

.card:hover,
[class*="Card"]:hover > div {
  box-shadow: var(--shadow-md);
  border-color: var(--color-border-hover);
}

/* ========================================
   INPUT CONSISTENCY
   Ensure all form inputs are consistent
   ======================================== */
input:not([type="checkbox"]):not([type="radio"]),
textarea,
select {
  min-height: var(--touch-target-min);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background-color: var(--color-surface);
  padding: var(--space-3) var(--space-4);
  font-size: var(--text-base);
  transition: var(--transition-colors);
}

input:focus,
textarea:focus,
select:focus {
  border-color: var(--color-accent);
  box-shadow: var(--shadow-focus);
}

input::placeholder,
textarea::placeholder {
  color: var(--color-text-tertiary);
}

/* ========================================
   SPACING CONSISTENCY
   Ensure consistent spacing across sections
   ======================================== */
section {
  padding-top: var(--space-fluid-lg);
  padding-bottom: var(--space-fluid-lg);
}

section + section {
  margin-top: 0;
}

/* Page headers */
.page-header {
  padding-top: var(--space-fluid-md);
  padding-bottom: var(--space-fluid-md);
  background-color: var(--color-surface-elevated);
  border-bottom: 1px solid var(--color-border);
}

/* ========================================
   TYPOGRAPHY CONSISTENCY
   Ensure headings use design tokens
   ======================================== */
.heading-1,
h1:not([class]) {
  font-size: var(--text-fluid-4xl);
  line-height: var(--leading-tight);
  font-weight: var(--font-bold);
  margin-bottom: var(--space-6);
}

.heading-2,
h2:not([class]) {
  font-size: var(--text-fluid-3xl);
  line-height: var(--leading-tight);
  font-weight: var(--font-bold);
  margin-bottom: var(--space-5);
}

.heading-3,
h3:not([class]) {
  font-size: var(--text-fluid-2xl);
  line-height: var(--leading-snug);
  font-weight: var(--font-semibold);
  margin-bottom: var(--space-4);
}

/* ========================================
   MODAL/DIALOG CONSISTENCY
   ======================================== */
[role="dialog"],
.modal,
.dialog {
  background-color: var(--color-surface);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-2xl);
  padding: var(--space-6);
  max-width: min(90vw, var(--container-md));
}

/* Modal backdrop */
[role="dialog"]::backdrop,
.modal-backdrop {
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

/* ========================================
   NAVIGATION CONSISTENCY
   ======================================== */

/* Don't override navigation - let it keep its own styles */
/* Navigation is already well-styled and working perfectly */

/* ========================================
   PRODUCT CARD CONSISTENCY
   ======================================== */
.product-card {
  border-radius: var(--radius-lg);
  overflow: hidden;
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  transition: var(--transition-colors), var(--transition-transform);
}

.product-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: var(--color-border-hover);
}

.product-card img {
  aspect-ratio: var(--aspect-product-card);
  object-fit: cover;
  width: 100%;
}

/* ========================================
   BADGE CONSISTENCY
   ======================================== */
.badge,
[class*="Badge"] {
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-full);
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
}

/* ========================================
   TOAST/NOTIFICATION CONSISTENCY
   ======================================== */
[role="alert"],
[role="status"],
.toast,
.notification {
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  box-shadow: var(--shadow-lg);
  border-left: 4px solid currentColor;
  background-color: var(--color-surface);
}

/* ========================================
   SKELETON LOADER CONSISTENCY
   ======================================== */
[class*="Skeleton"],
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-neutral-200) 0%,
    var(--color-neutral-100) 50%,
    var(--color-neutral-200) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s ease-in-out infinite;
  border-radius: var(--radius-md);
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ========================================
   FOOTER CONSISTENCY
   ======================================== */
footer {
  background-color: var(--color-surface-elevated);
  border-top: 1px solid var(--color-border);
  padding: var(--space-fluid-lg) 0;
  margin-top: auto;
}

/* ========================================
   ADMIN PANEL CONSISTENCY
   ======================================== */
[class*="admin"] .container,
[class*="Admin"] .container {
  max-width: var(--container-2xl);
}

/* Admin stats cards */
[class*="stats"] [class*="Card"],
[class*="Stats"] [class*="Card"] {
  min-height: 120px;
}

/* ========================================
   RESPONSIVE IMAGES
   Ensure no layout shift
   ======================================== */
img:not([width]):not([height]) {
  aspect-ratio: var(--aspect-landscape);
}

img[loading="lazy"] {
  content-visibility: auto;
}

/* ========================================
   SCROLLBAR CONSISTENCY
   Custom scrollbars for better aesthetics
   ======================================== */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background-color: var(--color-neutral-100);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb {
  background-color: var(--color-neutral-400);
  border-radius: var(--radius-full);
  border: 2px solid var(--color-neutral-100);
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-neutral-500);
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-neutral-400) var(--color-neutral-100);
}

/* ========================================
   LOADING STATES
   Consistent loading indicators
   ======================================== */
.loading,
[aria-busy="true"] {
  position: relative;
  pointer-events: none;
  opacity: var(--opacity-60);
}

.loading::after {
  content: "";
  position: absolute;
  inset: 0;
  background-color: var(--color-surface);
  opacity: var(--opacity-50);
  border-radius: inherit;
  cursor: wait;
}

/* ========================================
   ERROR STATES
   Consistent error styling
   ======================================== */
[aria-invalid="true"],
.error,
.has-error {
  border-color: var(--color-error-500);
}

[aria-invalid="true"]:focus {
  box-shadow: var(--shadow-focus-error);
}

.error-message {
  color: var(--color-error-700);
  font-size: var(--text-sm);
  margin-top: var(--space-2);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

/* ========================================
   SUCCESS STATES
   Consistent success styling
   ======================================== */
.success {
  border-color: var(--color-success-500);
  color: var(--color-success-700);
}

/* ========================================
   FOCUS WITHIN
   Enhance focus visibility for containers
   ======================================== */
.focus-within:focus-within {
  outline: var(--outline-focus);
  outline-offset: var(--outline-offset-focus);
}

/* ========================================
   PRINT OVERRIDES
   Ensure consistency in print
   ======================================== */
@media print {
  nav,
  footer,
  .no-print {
    display: none !important;
  }
  
  .card,
  [class*="Card"] {
    box-shadow: none;
    border: 1px solid #000;
  }
  
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: var(--text-xs);
  }
}

/* ========================================
   DARK MODE ENHANCEMENTS
   Ensure consistency in dark mode
   ======================================== */
@media (prefers-color-scheme: dark) {
  .product-card:hover {
    box-shadow: var(--shadow-xl);
  }
  
  [role="dialog"],
  .modal {
    box-shadow: 0 0 0 1px var(--color-border), var(--shadow-2xl);
  }
}

